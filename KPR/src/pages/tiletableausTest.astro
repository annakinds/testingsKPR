---
import "../styles/reset.css";
import "../styles/global.css";
import Layout from "../layouts/Layout.astro";
import { Image } from "astro:assets";
import tile from "../assets/tiletableau.png";
import Map from "../components/Map.astro";
---

<Layout>
    <div class="peel-container">
        <div class="peel-rect">
            <div class="peel-fold">
                <h1 class="start__title">
                    What is hiding behind the labels of Tile Tableaus?
                </h1>
                <Image
                    class="image"
                    src={tile}
                    alt="Tile tableau from Aalbeke"
                />
                <p class="start__cta">Shake the labels off</p>
            </div>
        </div>

        <div class="content">
            <Image class="image" src={tile} alt="Tile tableau from Aalbeke" />
            <p class="start__title">
                What is hiding behind the labels of Tile Tableaus?
            </p>
        </div>

        <div class="corner-square" id="cornerSquare"></div>
    </div>
</Layout>

<style>
    .start__title {
        color: var(--white);
        font-size: 1.5rem;
        font-weight: bold;
        text-align: center;
    }

    .start__cta {
        color: var(--white);
        text-align: center;
        font-size: 1.25rem;
        margin-top: 5rem;
    }

    .peel-container {
        position: relative;
        width: 100%;
        min-height: 100vh;
        background: var(--primary-color);
        perspective: 1500px;
        overflow: hidden;
    }

    .content {
        position: relative;
        z-index: 1;
        padding: 4rem 2rem;
        color: var(--white);
    }

    .image {
        display: block;
        max-width: 28rem;
        width: 90%;
        margin: 2rem auto;
        border: 0.5rem solid var(--white);
    }

    .peel-rect {
        position: absolute;
        inset: 0;
        z-index: 30;
        pointer-events: none;
        transform-style: preserve-3d;
    }

    .peel-fold {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;

        background: var(--black);

        transform-origin: bottom right;
        pointer-events: none;
        z-index: 30;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start; 
        padding-top: 4rem;

        backface-visibility: hidden;
        will-change: transform;
    }

    .corner-square {
        position: absolute;
        bottom: 0;
        right: 0;
        width: 5rem;
        height: 5rem;
        z-index: 50;
        cursor: pointer;
        pointer-events: auto;
        background: linear-gradient(
            to top left,
            var(--primary-color) 50%,
            var(--secondary-color) 50%
        );
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .peel-fold::after {
        content: "";
        position: absolute;
        inset: 0;
        background: linear-gradient(
            90deg,
            rgba(255, 255, 255, 0.03),
            rgba(0, 0, 0, 0.05)
        );
        transform: translateZ(-1px);
    }

    .content {
        z-index: 1;
    }

    .peel-rect,
    .peel-fold {
        z-index: 20;
    }

    .corner-square {
        z-index: 999;
    }
</style>
